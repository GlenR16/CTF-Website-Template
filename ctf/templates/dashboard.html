{%load static%}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" type="image/png" href="{% static 'favicon.ico' %}"/>
    <link rel="stylesheet" href="{%static '/main.css' %}">
    <title>Dashboard</title>
</head>
<body>
    <div class="nav">
        <a href=".."><img src="{%static '/logo.png' %}" alt="VoidCTF"></a>
        <div class="btns">
            <a href="profile">Profile</a>
            <form action="../" method="post">
                {% csrf_token %}
                <input type="submit" value="Logout">
            </form>
        </div>
    </div>
    <div class="main">
        <div class="row content">
            <label>Name: {{user.name}}</label>
            <label>Team Score: {{user.team.score}}</label>
        </div>
    </div>
    {% if CTF.ended == True %}
    <div class="main">
        <div class="row heading">
            The CTF has ended. <br> You can still solve the challenges however the system will not accept the flags.
        </div>
    </div>
    {% endif %}
    {% if user.team != None %}
    {% for item in challenge %}
    <div class="main">
        <div class="heading">{{item.name}} [{{item.points}}]</div>
        <div class="row">
            <div class="content side">
                {{item.category}}<br>
                
                {{item.description}}<br>
                {% if item.hint != None %}
                <b>{{item.hint}}</b><br>
                {% endif %}
                <a href="{{item.endpoint}}">URL/URI</a>
                <br>
            </div>
            <div class="content side">
                <form action="flag" method="post">
                    {% csrf_token %}
                    <input type="text" name="flag" placeholder="Flag">
                    <input type="hidden" name="cid" value="{{item.cid}}">
                    <input type="submit" value="Check Flag"><br>
                </form>
                Solves: {{item.solves}} <br>
            </div>
        </div>
    </div>
    {% endfor %}
    {% else %}
    <div class="main">
        <div class="content"><p class="error">
            Join a team to view challenges. <br>
            Goto profile to create/join a team.
        </p></div>
    </div>
    {% endif %}
    <div class="main">
        <div class="content">
            Total Players: {{CTF.total_users}}
        </div>
    </div>
</body>
</html>